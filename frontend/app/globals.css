@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ===== SEMANTIC TOKENS - Light Mode ===== */
    /* Hierarchy: slate-50 (page) → slate-100 (card) → slate-200 (input) → slate-300 (hover) → slate-800 (button) */

    /* Backgrounds - slate-50 (LIGHTEST) */
    --background: 210 40% 98%;                    /* Slate-50: Page background */
    --foreground: 215.3 19.3% 34.5%;              /* Slate-600: Body text */

    /* Cards & Elevated Surfaces - slate-100 */
    --card: 210 40% 96.1%;                        /* Slate-100: Cards/Components */
    --card-foreground: 215.3 25% 26.7%;           /* Slate-700: Headings on cards */

    /* Popovers & Dropdowns - slate-100 */
    --popover: 210 40% 96.1%;                     /* Slate-100 */
    --popover-foreground: 215.3 19.3% 34.5%;      /* Slate-600 */

    /* Primary Interactive - slate-800 (Button background) */
    --primary: 217.2 32.6% 17.5%;                 /* Slate-800: Button background */
    --primary-foreground: 210 40% 98%;            /* Slate-50: Light text on dark */

    /* Secondary Interactive */
    --secondary: 214.3 31.8% 91.4%;               /* Slate-200: Input fields */
    --secondary-foreground: 217.2 32.6% 17.5%;    /* Slate-800 */

    /* Muted/Disabled */
    --muted: 214.3 31.8% 91.4%;                   /* Slate-200: Muted backgrounds */
    --muted-foreground: 215 20.2% 65.1%;          /* Slate-400: Placeholder text */

    /* Accent (Hover States) - slate-300 */
    --accent: 212.7 26.8% 83.9%;                  /* Slate-300: Input hover state */
    --accent-foreground: 217.2 32.6% 17.5%;       /* Slate-800 */

    /* Destructive */
    --destructive: 0 84.2% 60.2%;                 /* Red for destructive actions */
    --destructive-foreground: 210 40% 98%;        /* Slate-50 */

    /* Borders & Inputs - slate-200/slate-300 */
    --border: 212.7 26.8% 83.9%;                  /* Slate-300: Borders */
    --input: 214.3 31.8% 91.4%;                   /* Slate-200: Input fields (default) */
    --ring: 215 20.2% 65.1%;                      /* Slate-400: Focus ring */

    /* Success State */
    --success: 142.1 76.2% 36.3%;                 /* Green for success */
    --success-foreground: 210 40% 98%;            /* Slate-50 */

    /* Warning State */
    --warning: 32.1 94.6% 43.7%;                  /* Amber for warnings */
    --warning-foreground: 217.2 32.6% 17.5%;      /* Slate-800 */

    /* Info State */
    --info: 221.2 83.2% 53.3%;                    /* Blue for info */
    --info-foreground: 210 40% 98%;               /* Slate-50 */

    /* Radius */
    --radius: 0.5rem;

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);

    /* Shadow Color - Use Slate-300 for blue-grey glow in light mode */
    --shadow-color: 212.7 26.8% 83.9%;            /* Slate-300 */

    /* Chart Colors */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }

  .dark {
    /* ===== SEMANTIC TOKENS - Dark Mode ===== */
    /* Hierarchy: slate-800 (page) → slate-700 (card) → slate-600 (input) → slate-500 (hover) → slate-50 (button) */

    /* Background Layer - slate-800 (DARKEST ALLOWED) */
    --background: 217.2 32.6% 17.5%;              /* Slate-800: Page background */
    --foreground: 214.3 31.8% 91.4%;              /* Slate-200: Titles, headings */

    /* Surface/Card Layer - slate-700 */
    --card: 215.3 25% 26.7%;                      /* Slate-700: Cards/Components */
    --card-foreground: 214.3 31.8% 91.4%;         /* Slate-200: Titles on cards */

    /* Popovers & Dropdowns - slate-700 */
    --popover: 215.3 25% 26.7%;                   /* Slate-700 */
    --popover-foreground: 212.7 26.8% 83.9%;      /* Slate-300: Labels, links */

    /* Primary Interactive - slate-50 (Button background) */
    --primary: 210 40% 98%;                       /* Slate-50: Button background */
    --primary-foreground: 217.2 32.6% 17.5%;      /* Slate-800: Dark text on light */

    /* Secondary Interactive */
    --secondary: 215.3 19.3% 34.5%;               /* Slate-600: Input fields */
    --secondary-foreground: 210 40% 98%;          /* Slate-50 */

    /* Muted/Disabled States */
    --muted: 215.3 19.3% 34.5%;                   /* Slate-600: Muted backgrounds */
    --muted-foreground: 215 20.2% 65.1%;          /* Slate-400: Placeholder text */

    /* Accent (Hover States) - slate-500 */
    --accent: 215.4 16.3% 46.9%;                  /* Slate-500: Input hover state */
    --accent-foreground: 210 40% 98%;             /* Slate-50 */

    /* Destructive */
    --destructive: 0 62.8% 50%;                   /* Red for destructive actions */
    --destructive-foreground: 210 40% 98%;        /* Slate-50 */

    /* Input Layer - slate-600 */
    --input: 215.3 19.3% 34.5%;                   /* Slate-600: Input fields (default) */
    --input-border: 215 20.2% 65.1%;              /* Slate-400: Borders */

    /* Borders - slate-400 */
    --border: 215 20.2% 65.1%;                    /* Slate-400: Borders */
    --ring: 215 20.2% 65.1%;                      /* Slate-400: Focus ring */

    /* Success State */
    --success: 142.1 70.6% 45.3%;                 /* Brighter green for dark backgrounds */
    --success-foreground: 210 40% 98%;            /* Slate-50 */

    /* Warning State */
    --warning: 32.1 94.6% 43.7%;                  /* Amber for warnings */
    --warning-foreground: 217.2 32.6% 17.5%;      /* Slate-800 */

    /* Info State */
    --info: 221.2 83.2% 53.3%;                    /* Blue for info */
    --info-foreground: 210 40% 98%;               /* Slate-50 */

    /* Shadows - Stronger for visibility */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);

    /* Shadow Color - Dark mode needs black for visibility */
    --shadow-color: 0 0% 0%;                      /* Black */

    /* Chart Colors */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  /* ===== Shadow System for Depth Hierarchy ===== */

  /* Light Mode Shadows - Using slate color for blue-grey glow */
  .shadow-soft {
    box-shadow: 0 2px 4px -1px hsl(var(--shadow-color) / 0.5),
                0 1px 2px -1px hsl(var(--shadow-color) / 0.5);
  }

  .shadow-card {
    box-shadow: 0 10px 15px -3px hsl(var(--shadow-color) / 0.4),
                0 4px 6px -4px hsl(var(--shadow-color) / 0.3);
  }

  .shadow-elevated {
    box-shadow: 0 12px 20px -4px hsl(var(--shadow-color) / 0.45),
                0 6px 10px -5px hsl(var(--shadow-color) / 0.35);
  }

  .shadow-floating {
    box-shadow: 0 20px 25px -5px hsl(var(--shadow-color) / 0.5),
                0 8px 10px -6px hsl(var(--shadow-color) / 0.3);
  }

  /* Dark Mode Shadows - Much stronger and more visible */
  .dark .shadow-soft {
    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 0.8),
                0 1px 3px 0 rgb(0 0 0 / 0.6);
  }

  .dark .shadow-card {
    box-shadow: 0 6px 12px -2px rgb(0 0 0 / 0.9),
                0 3px 7px -3px rgb(0 0 0 / 0.7),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05);  /* Subtle inner glow */
  }

  .dark .shadow-elevated {
    box-shadow: 0 12px 20px -4px rgb(0 0 0 / 0.95),
                0 6px 10px -5px rgb(0 0 0 / 0.8),
                inset 0 0 0 1px rgba(255, 255, 255, 0.08);
  }

  .dark .shadow-floating {
    box-shadow: 0 24px 38px -6px rgb(0 0 0 / 1),
                0 12px 18px -8px rgb(0 0 0 / 0.9),
                inset 0 0 0 1px rgba(255, 255, 255, 0.1);
  }

  /* Override Tailwind's default shadow-md in dark mode */
  .dark .shadow-md {
    box-shadow: 0 6px 12px -2px rgb(0 0 0 / 0.9),
                0 3px 7px -3px rgb(0 0 0 / 0.7),
                inset 0 0 0 1px rgba(255, 255, 255, 0.05) !important;
  }

  .dark .shadow-lg {
    box-shadow: 0 12px 20px -4px rgb(0 0 0 / 0.95),
                0 6px 10px -5px rgb(0 0 0 / 0.8),
                inset 0 0 0 1px rgba(255, 255, 255, 0.08) !important;
  }

  /* ===== Input Interactive States (Dark Mode) ===== */
  .dark input[type="text"],
  .dark input[type="email"],
  .dark input[type="password"],
  .dark input[type="date"],
  .dark textarea {
    background-color: hsl(215.3 19.3% 34.5%);  /* slate-600: Input fields (default) */
    border-color: hsl(215 20.2% 65.1%);        /* slate-400: Borders */
  }

  .dark input[type="text"]:hover,
  .dark input[type="email"]:hover,
  .dark input[type="password"]:hover,
  .dark input[type="date"]:hover,
  .dark textarea:hover {
    background-color: hsl(215.4 16.3% 46.9%);  /* slate-500: Input hover state */
  }

  .dark input[type="text"]:focus,
  .dark input[type="email"]:focus,
  .dark input[type="password"]:focus,
  .dark input[type="date"]:focus,
  .dark textarea:focus {
    background-color: hsl(215.4 16.3% 46.9%);  /* slate-500: Input hover state */
    border-color: hsl(215 20.2% 65.1%);        /* slate-400: Borders */
  }

  /* ===== Table Fixes ===== */
  /* Prevent text cursor blinking in tables */
  table, table * {
    cursor: default !important;
    caret-color: transparent !important;
  }

  /* ===== Sub-component Elevation ===== */
  /* Add subtle shadows to muted sections to create depth */
  .bg-muted,
  .bg-muted\/50 {
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05),
                0 1px 1px 0 rgb(0 0 0 / 0.03);
  }

  /* Stronger shadows in dark mode */
  .dark .bg-muted,
  .dark .bg-muted\/50 {
    box-shadow: 0 2px 4px 0 rgb(0 0 0 / 0.5),
                0 1px 2px 0 rgb(0 0 0 / 0.4);
  }

  /* ===== Badge Dark Mode Support ===== */
  /* Switch badge colors in dark mode */
  .dark span[style*="--badge-bg-light"] {
    background-color: var(--badge-bg-dark) !important;
    color: var(--badge-color-dark) !important;
    border-color: var(--badge-border-dark) !important;
  }

  /* ===== Threshold Dot Dark Mode Support ===== */
  /* Switch threshold status dot colors in dark mode */
  .dark div[style*="--dot-color-light"] {
    background-color: var(--dot-color-dark) !important;
  }

  /* ===== Banner Dark Mode Support ===== */
  /* Switch banner background and border in dark mode */
  .dark div[style*="--banner-bg-light"] {
    background-color: var(--banner-bg-dark) !important;
    border-color: var(--banner-border-dark) !important;
  }

  /* ===== Premium Paper Texture (Grainy Gradient) ===== */
  .bg-grainy {
    position: relative;
    background-color: hsl(var(--background));
  }

  /* The Noise Layer */
  .bg-grainy::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    /* SVG Turbulence Filter for Noise */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    /* Mask fades the noise out at the edges for softness */
    mask-image: radial-gradient(circle at center, black, transparent 80%);
  }

  /* Light Mode: Subtle blue-slate atmospheric glow */
  .bg-grainy::after {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -2;
    background: radial-gradient(
      circle at 50% 0%,
      hsl(210 40% 96.1% / 0.4) 0%,
      transparent 70%
    );
  }

  /* Dark Mode Adjustments */
  .dark .bg-grainy::before {
    opacity: 0.3; /* Slightly more visible grain on dark */
  }

  .dark .bg-grainy::after {
    background: radial-gradient(
      circle at 50% 0%,
      hsl(var(--primary) / 0.08) 0%,
      transparent 70%
    );
  }
}
